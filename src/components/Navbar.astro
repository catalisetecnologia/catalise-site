---
import { Image } from "astro:assets";
import logo from "../img/logo catalise.png";
import MenuMobile from "./MenuMobile.astro";
import Botao from "./Botao.astro";
---

<nav class="container navbar">
  <a aria-label="catálise" href="/">
    <Image src={logo} alt="Logo do Catálise" class="logo" />
  </a>
  <MenuMobile />
  <div class="links">
    <a aria-label="catálise" href="/">
      <Image src={logo} alt="Logo do Catálise" class="logo logo-mobile" />
    </a>
    <a aria-label="nossos produtos" href="/produtos" class="link no-dropdown"
      >Nossos produtos</a
    >
    <p class="link dropdown">Nossos produtos</p>
    <div class="dropdown-links">
      <div class="description">
        <h1>Confira nossos produtos!</h1>
        <p>Explore nossos produtos e siga em direção ao sonho da aprovação.</p>
        <a aria-label="nossos produtos" href="/produtos">Saiba mais</a>
      </div>
      <div class="produtos-links">
        <p aria-label="nossas turmas" class="produtos-link link active">
          Turmas
        </p>
        <p aria-label="nossos materiais" class="produtos-link link">
          Materiais
        </p>
      </div>
      <div class="produtos-links-produtos active">
        <a aria-label="turma ita-ime" class="link" href="/produtos/ita-ime"
          >Turma ITA-IME</a
        >
        <a
          aria-label="turma pre-ita-ime"
          class="link"
          href="/produtos/pre-ita-ime">Turma PRÉ ITA-IME</a
        >
        <a
          aria-label="revisão ita-ime"
          class="link"
          href="/produtos/revisao-ita-ime">Revisão ITA-IME</a
        >
        <a aria-label="turma eear" class="link" href="/produtos/eear"
          >Turma EEAR</a
        >
        <a aria-label="revisão eear" class="link" href="/produtos/revisao-eear"
          >Revisão EEAR</a
        >
      </div>
      <div class="produtos-links-produtos">
        <a
          aria-label="a biblia para o ita"
          class="link"
          href="/produtos/biblia-ita">A Biblia para o ITA</a
        >
        <a aria-label="bizuarios" class="link" href="/produtos/bizuarios"
          >Bizuários de Química</a
        >
        <a
          aria-label="miscelaneas ita"
          class="link"
          href="/produtos/miscelaneas-ita">Miscelâneas ITA</a
        >
        <a
          aria-label="miscelaneas ime"
          class="link"
          href="/produtos/miscelaneas-ime">Miscelâneas IME</a
        >
        <a
          aria-label="miscelaneas afa"
          class="link"
          href="/produtos/miscelaneas-afa">Miscelâneas AFA</a
        >
        <a
          aria-label="miscelaneas eear"
          class="link"
          href="/produtos/miscelaneas-eear">Miscelâneas EEAR</a
        >
      </div>
    </div>
    <a aria-label="quem somos" href="/sobre" class="link">Quem somos</a>
    <a aria-label="plano escolas" href="/parcerias" class="link"
      >Plano Escolas</a
    >
    <a href="/contato" class="link mb-6">Contato</a>
    <div class="social">
      <ul>
        <li>
          <a
            aria-label="instagram"
            href="https://www.instagram.com/cataliseita/"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 500 500"
            >
              <path
                fill="#fff"
                d="M120 30c-49.6 0-90 40.4-90 90v260c0 49.6 40.4 90 90 90h260c49.6 0 90-40.4 90-90V120c0-49.6-40.4-90-90-90H120Zm260 50h30c5.5 0 10 4.5 10 10v30c0 5.5-4.5 10-10 10h-30c-5.5 0-10-4.5-10-10V90c0-5.5 4.5-10 10-10Zm-130 20c53.3 0 100.2 28 126.8 70H420v200c0 27.6-22.4 50-50 50H130c-27.6 0-50-22.4-50-50V170h43.2c26.6-42 73.5-70 126.8-70Zm0 20c-71.7 0-130 58.3-130 130s58.3 130 130 130 130-58.3 130-130-58.3-130-130-130Zm0 40c49.6 0 90 40.4 90 90s-40.4 90-90 90-90-40.4-90-90 40.4-90 90-90Z"
              ></path>
            </svg>
             @cataliseita</a
          >
        </li>
        <li>
          <a
            aria-label="instagram"
            href="https://www.instagram.com/cataliseeear/"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 500 500"
            >
              <path
                fill="#fff"
                d="M120 30c-49.6 0-90 40.4-90 90v260c0 49.6 40.4 90 90 90h260c49.6 0 90-40.4 90-90V120c0-49.6-40.4-90-90-90H120Zm260 50h30c5.5 0 10 4.5 10 10v30c0 5.5-4.5 10-10 10h-30c-5.5 0-10-4.5-10-10V90c0-5.5 4.5-10 10-10Zm-130 20c53.3 0 100.2 28 126.8 70H420v200c0 27.6-22.4 50-50 50H130c-27.6 0-50-22.4-50-50V170h43.2c26.6-42 73.5-70 126.8-70Zm0 20c-71.7 0-130 58.3-130 130s58.3 130 130 130 130-58.3 130-130-58.3-130-130-130Zm0 40c49.6 0 90 40.4 90 90s-40.4 90-90 90-90-40.4-90-90 40.4-90 90-90Z"
              ></path>
            </svg>
             @cataliseeear</a
          >
        </li>
        <li>
          <a
            aria-label="youtube"
            href="https://www.youtube.com/catalisevestibulares"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 500 500"
            >
              <path
                fill="#fff"
                d="M448.98 145c-3.98-22-22.96-38-45-43-32.96-7-93.98-12-160-12-65.97 0-127.96 5-160.97 12-22 5-41.02 20-45 43C33.98 170 30 205 30 250s3.98 80 8.98 105c4.03 22 23.01 38 45 43 35 7 95 12 161.02 12 66.02 0 126.02-5 161.02-12 21.99-5 40.97-20 45-43 3.98-25 8.98-61.02 10-105-2.04-45-7.04-80-12.04-105ZM190 320V180l122 70-122 70Z"
              ></path>
            </svg>
             Youtube</a
          >
        </li>
        <li>
          <a
            aria-label="linkedin"
            href="https://www.linkedin.com/company/cat%C3%A1lise/posts/?feedView=all&viewAsMember=true"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 500 500"
            >
              <path
                fill="#fff"
                d="M410 40H90c-27.6 0-50 22.4-50 50v320c0 27.6 22.4 50 50 50h320c27.6 0 50-22.4 50-50V90c0-27.6-22.4-50-50-50ZM170 200v190h-60V200h60Zm-60-55.3c0-14 12-28.7 30-28.7s29.3 14.7 30 28.7c0 14-11.2 29.3-30 29.3-18 0-30-15.3-30-29.3ZM390 390h-60V290c0-20-10-40-35-40.4h-.8c-24.2 0-34.2 20.6-34.2 40.4v100h-60V200h60v25.6s19.3-25.6 58.1-25.6c39.7 0 71.9 27.3 71.9 82.6V390Z"
              ></path>
            </svg>
             Linkedin</a
          >
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  // se o link da div com a classe links === currentURL, adicione a classe active no link
  const nav = document.querySelector(".navbar");
  const navLinks = nav.querySelectorAll(".link");
  const currentURL = window.location.href;
  navLinks.forEach((link) => {
    if ((link as HTMLAnchorElement).href === currentURL) {
      link.classList.add("active");
    }
  });

  const url = window.location.pathname;
  const links = document.querySelectorAll(".produtos-link");
  const divs = document.querySelectorAll(".produtos-links-produtos");

  // Add click event listener to each link
  links.forEach((link, index) => {
    link.addEventListener("click", () => {
      // Remove "active" class from all link
      links.forEach((btn) => btn.classList.remove("active"));
      // Add "active" class to the clicked link
      link.classList.add("active");
      // Hide all divs
      divs.forEach((div) => div.classList.remove("active"));
      // Show the corresponding div based on the index of the clicked link
      divs[index].classList.add("active");
    });
  });
  if (
    url.includes("/produtos/biblia-ita") ||
    url.includes("/produtos/bizuarios") ||
    url.includes("/produtos/miscelaneas-ita") ||
    url.includes("/produtos/miscelaneas-ime") ||
    url.includes("/produtos/miscelaneas-afa") ||
    url.includes("/produtos/miscelaneas-eear")
  ) {
    links[0].classList.remove("active");
    links[1].classList.add("active");

    divs[0].classList.remove("active");
    divs[1].classList.add("active");
  }
</script>

<style scoped>
  .link {
    cursor: pointer;
    color: var(--clr-white);
    line-height: 1;
    font-size: unset;
  }
  .logo {
    width: 9rem;
    height: auto;
  }
  .navbar {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 1rem 1rem 1rem;
    height: 5rem;
    z-index: 10;
  }
  .links {
    display: none;
    gap: 1rem;
    text-decoration: none;
  }
  .link:hover,
  .link:focus {
    color: var(--clr-green);
  }
  .links a.active,
  .links p.active {
    color: var(--clr-green);
  }
  .links a:first-child,
  .links p:first-child {
    display: block;
  }
  .desktop {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: -webkit-fill-available;
    height: -webkit-fill-available;
    position: fixed;
    top: 0;
    right: 0px;
    background: hsl(220, 80%, 12%);
    padding: 3rem 2rem;
    z-index: 3;
    touch-action: none;
  }
  .desktop .link {
    font-size: large;
    color: var(--clr-lgray);
  }
  .desktop a:nth-child(2) {
    margin-top: 2rem;
  }
  .social ul {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 1rem;
    list-style: none;
    padding: 0;
  }
  .social li a {
    display: flex;
    flex-direction: row;
  }
  .social li a svg {
    width: 1.2rem;
    margin-right: 0.4rem;
  }
  .dropdown-links {
    position: absolute;
    top: 6rem;
    left: 0;
    display: none;
    gap: 3rem;
    width: -webkit-fill-available;
    background: var(--clr-dblue);
    margin-right: 1rem;
    padding: 3rem;
    border-radius: 2rem;
    border: 0.12rem solid hsl(210deg 33% 99% / 15%);
    backdrop-filter: blur(10rem);
    z-index: 4;
    color: var(--clr-white);
    box-shadow: 0 0.4rem 3rem 0 hsl(0deg 0% 0% / 30%);
  }
  .dropdown-links .description,
  .dropdown-links .produtos-links,
  .produtos-links-produtos {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-right: 3rem;
  }
  .dropdown-links .description {
    width: 28%;
    min-width: 11rem;
    border-right: 0.12rem solid hsl(210deg 33% 99% / 15%);
  }
  .dropdown-links .description a {
    color: var(--clr-green);
  }
  .dropdown-links .produtos-links {
    border-right: 0.12rem solid hsl(210deg 33% 99% / 15%);
  }
  .dropdown-links .produtos-links-produtos {
    display: none;
  }
  .dropdown-links .produtos-links-produtos.active {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(11rem, 1fr));
    width: 28rem;
    height: -webkit-fill-available;
  }
  .dropdown-links h1 {
    font-size: clamp(1.4rem, 2vw, 1.8rem);
  }
  .dropdown-links p {
    font-family: var(--font-book);
    font-size: clamp(0.9rem, 1.5vw, 1rem);
  }
  .links .dropdown-links a,
  .links .dropdown-links p {
    padding: 0.5rem 0;
  }
  .links .dropdown-links a.active,
  .links .dropdown-links p.active {
    position: relative;
    right: 1rem;
    background: hsl(219.31deg 80.56% 14.12% / 60%);
    padding: 0.5rem 1rem;
    border-radius: 100rem;
    width: 11rem;
  }
  nav .links .dropdown {
    display: none;
  }
  nav .links .no-dropdown {
    display: unset;
  }
  .dropdown:hover ~ .dropdown-links {
    display: flex;
  }
  .dropdown-links:hover.dropdown-links {
    display: flex;
  }
  .link:has(+ .dropdown-links:hover) {
    color: var(--clr-green);
  }
  .mb-6 {
    margin-bottom: 6rem;
  }
  @media screen and (min-width: 768px) {
    .links {
      display: flex;
      position: static;
      width: auto;
      margin-top: -0.3rem;
    }
    .links .link {
      display: inline-block;
      padding: 2rem;
      font-family: var(--font-book);
    }

    .links .social {
      display: none;
    }
    .links .logo-mobile {
      display: none;
    }
    nav .links .dropdown {
      display: unset;
    }
    nav .links .no-dropdown {
      display: none;
    }
    .mb-6 {
      margin-bottom: 0rem;
    }
  }
</style>
